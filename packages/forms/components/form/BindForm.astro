---
import { asyncContext } from "@astro-utils/context";

export interface Props  {
    bind?: any
};

const {bind} = Astro.props;
const context = {executeAfter: [], method: Astro.request.method, bind};

let htmlSolt = await asyncContext(() => Astro.slots.render('default'), Astro, {name: "@astro-utils/forms", context});
bind?.finishFormValidation();
for(const func of context.executeAfter){
    await (func as any)();
}


if(context.method == "POST"){
    context.method = "GET";
    htmlSolt = await asyncContext(() => Astro.slots.render('default'), Astro, {name: "@astro-utils/forms", context});
}
---
<Fragment set:html={htmlSolt} />
