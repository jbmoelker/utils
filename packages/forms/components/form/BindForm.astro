---
import { asyncContext } from "@astro-metro/context";

export interface Props  {
    bind?: any
};

const {bind} = Astro.props;
const context = {executeAfter: [], method: Astro.request.method, bind};

let htmlSolt = await asyncContext(() => Astro.slots.render('default'), Astro, {name: "@astro-metro/forms", context});
bind?.finishFormValidation();
for(const func of context.executeAfter){
    await func();
}


if(context.method == "POST"){
    context.method = "GET";
    htmlSolt = await asyncContext(() => Astro.slots.render('default'), Astro, {name: "@astro-metro/forms", context});
}
---
<Fragment set:html={htmlSolt} />